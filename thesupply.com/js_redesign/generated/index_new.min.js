"use strict";
var Main = {
    initialize: function() {
        var a = this;
        this.$categoryMenuItems = $(".jsNavLink"), this.$categoryMenuHeight = $("nav").outerHeight() + 13, this.$scrollItems = this.$categoryMenuItems.map(function() {
            var a = $($(this).attr("href"));
            return a.length ? a : void 0
        }), this.supplyNavItem = $("[href=#supply]"), this.resourcesNavItem = $("[href=#resources]"), this.pageHeight = $(document).height() - $(window).height(), this.insertDate(), this.handleWindowScroll(), this.fadeInHeader(), this.fadeInContent(), this.$categoryMenuItems.on("click", function(b) {
            a.handleNavClick(b)
        }), this.wasNavItemClicked = !1, $("#hello-form").on("submit", function(b) {
            b.preventDefault(), a.handleFormSubmit()
        })
    },
    fadeInHeader: function() {
        $(".jsSiteNavWrapper, .banner-wrapper, .sub-header, .first-section-fadein, .motion").addClass("visible")
    },
    handleFormSubmit: function() {
        var a = $("#hello-form").serialize();
        $.ajax({
            type: "POST",
            url: "send.php",
            data: a
        }).done(function(a) {
            console.log("success"), vex.dialog.alert({
                message: "Thanks for the info.",
                className: "vex-theme-wireframe"
            })
        }).fail(function(a) {
            vex.dialog.alert({
                message: "Something went wrong. Please check your info and try again.",
                className: "vex-theme-wireframe"
            }), console.log("fail " + a)
        })
    },
    handleNavClick: function(a) {
        var b = $("header").outerHeight(),
            c = $(a.currentTarget),
            d = c.attr("href"),
            e = $(d);
        a.preventDefault();
        var f = this;
        this.wasNavItemClicked = !0, $(".jsNavLink").removeClass("active"), c.addClass("active"), $("body, html").animate({
            scrollTop: e.offset().top.toFixed(0) - (b + 8)
        }, 300, function() {
            f.wasNavItemClicked = !1
        })
    },
    handleWindowScroll: function() {
        var a = this;
        this.wasNavItemClicked = !1, $(window).on("scroll", function() {
            0 == a.wasNavItemClicked && a.navActiveOnScroll(), a.fadeInContent()
        })
    },
    insertDate: function() {
        var a = $("#date"),
            b = new Date,
            c = b.getTime(),
            d = 6e4 * b.getTimezoneOffset(),
            e = c + d,
            f = -6,
            g = e + 36e5 * f,
            h = new Date(g),
            i = h.getDate(),
            j = h.getFullYear(),
            k = [];
        k[0] = "January", k[1] = "February", k[2] = "March", k[3] = "April", k[4] = "May", k[5] = "June", k[6] = "July", k[7] = "August", k[8] = "September", k[9] = "October", k[10] = "November", k[11] = "December";
        var l = k[h.getMonth()],
            m = i + " " + l + " " + j;
        a.text(m)
    },
    navActiveOnScroll: function() {
        var a = $(document).scrollTop(),
            b = a + this.$categoryMenuHeight,
            c = this.$scrollItems.map(function() {
                return $(this).offset().top < b ? this : void 0
            });
        c = c[c.length - 1];
        var d = c && c.length ? c[0].id : " ";
        this.$categoryMenuItems.removeClass("active").filter("[href=#" + d + "]").addClass("active"), 100 >= a && this.supplyNavItem.addClass("active"), this.pageHeight == a && (this.$categoryMenuItems.removeClass("active"), this.resourcesNavItem.addClass("active"))
    },
    fadeInContent: function() {
        var a = $(window).scrollTop() + $(window).height() - 150;
        $(".fade-scroll").each(function(b) {
            var c = $(this).offset().top;
            a > c && $(this).addClass("visible")
        })
    }
};